// Кэррол Смит и шушара всякая
void ProcessDialogEvent()
{
	ref NPChar, sld;
	aref Link, NextDiag;

	DeleteAttribute(&Dialog,"Links");

	makeref(NPChar,CharacterRef);
	makearef(Link, Dialog.Links);
	makearef(NextDiag, NPChar.Dialog);

	switch(Dialog.CurrentNode)
	{
		

		case "First time":
			int iPhrase_GothicSmithy = rand(1);
			switch (iPhrase_GothicSmithy)
			{
			case 0:
            		dialog.text = "Кредиты, депозиты, ценные бумаги, облигации... Это все так интересно.";
        		link.l1 = "Никогда бы не подумал.";
        		link.l1.go = "Exit";
			break;

			case 1:
            		dialog.text = "Заниамться банковским делом - это выгодно! Задумайтесь об этом...";
        		link.l1 = "Как будет свободное время...";
        		link.l1.go = "Exit";
			break;			
			}
		break;

 		case "Exit":
                                    NextDiag.CurrentNode = "First time";
		DialogExit();
		break;


		case "MartiniqueAbord":
 	PlaySound("VOICE\Russian\gotica\SVM_1\SVM_16_IGETYOUSTILL.wav");
            	dialog.text = "Я всё - таки достала тебя...";
        	link.l1 = "...";
        	link.l1.go = "2";
	break;

		case "2":
 	PlaySound("VOICE\Russian\GOTHIC\GG\GG_DAMALS_18.wav");
            	dialog.text = "";
        	link.l1 = "К чему весь этот фарс, работа есть работа?";
        	link.l1.go = "3";
	break;

		case "3":
 	PlaySound("VOICE\Russian\gotica\SVM_1\SVM_16_KILLENEMY.wav");
            	dialog.text = "Умри подонок.";
        	link.l1 = "...";
        	link.l1.go = "Gun Attack";
	break;

 	case "Gun Attack":
                   NextDiag.CurrentNode = "First time";
	DialogExit();
	sld=characterFromID("KarSec");
	LAi_SetActorType(sld);
            	LAi_ActorTurnToCharacter(sld, pchar);
	LAi_ActorAnimation(sld, "Shot", "GothicSmithy_Ghostship_Gun", 1.5);
	break;

	case "MartiniqueAbord_Gun":
                   if(sti(pchar.money) >= 1)
	{
            	dialog.text = "Спасибо за золото - герой...";
	link.l1 = "...";
	link.l1.go = "ITOOKYOURGOLD";
	}
	else
	{
            	dialog.text = "Ах ты сосунок у тебя даже золота нет...";
	link.l1 = "...";
	link.l1.go = "NO_ITOOKYOURGOLD";
	}

                   LAi_SetCurHP(pchar, 5);						
	LAi_SetActorType(pchar);
	LAi_ActorAnimation(pchar, "death_3", "", -1);
	break;

 	 case "ITOOKYOURGOLD":
 	 PlaySound("VOICE\Russian\gotica\SVM_1\SVM_16_ITOOKYOURGOLD.wav");
            	 dialog.text = "Спасибо за золото - герой...";
        	  link.l1 = "";
        	  link.l1.go = "MartiniqueAbord_Gun_Exit";
	  pchar.money = 0;
	  break;

 	 case "NO_ITOOKYOURGOLD":
 	 PlaySound("VOICE\Russian\GOTHIC\CRIME_W\CRIME_W_2.wav");
            	 dialog.text = "Ах ты сосунок у тебя даже злолота нет...";
        	 link.l1 = "";
        	 link.l1.go = "MartiniqueAbord_Gun_Exit";
	  break;

 	case "MartiniqueAbord_Gun_Exit":
                     NextDiag.CurrentNode = "First time";
	DialogExit();
	AddQuestRecord("Gothic_Smithy", "12");
	AddDialogExitQuest("GothicSmithy_GhostshipGetOut");
	break;

	case "3 At Cayman":
            	dialog.text = "Заткнись, червяк! Я давно задаюсь вопросом - как ты ещё самостоятельно ходишь? Тебе ведь уже давно нужны костыли, ты, соломенное пугало! Дорогуша, прикончи этого червяка, и ты станешь моим самым обеспеченным фаворитом! Ты будешь захлебываться в золоте!";
        	link.l1 = "";
        	link.l1.go = "3 Exit";
	Characters[GetCharacterIndex("SmithyDavid")].Dialog.CurrentNode = "21";
	break;

 		case "3 Exit":
                                          NextDiag.CurrentNode = "First Time";
		DialogExit();
		sld=characterFromID("SmithyDavid");
		LAi_SetActorType(sld);
		Lai_ActorDialogNow(sld, Pchar, "",-1);
		break;

	case "4":
            	dialog.text = "Ха-ха-ха, ты-то деловой человек? Да ты старик никчемный, ты не можешь контролировать не своих людей, не свои суда, не свои капиталы! Ничего абсолютно! Ты - ничтожество! Неудачник! Старый маразматик!";
        	link.l1 = "";
        	link.l1.go = "3 Exit";
	Characters[GetCharacterIndex("SmithyDavid")].Dialog.CurrentNode = "22";
	break;

	case "5":
            	dialog.text = "Я не крала твой фрегат. Просто его капитан знает толк в работодателях. Я ему больше нравлюсь, чем старый полоумный толстосум.";
        	link.l1 = "";
        	link.l1.go = "3 Exit";
	Characters[GetCharacterIndex("SmithyDavid")].Dialog.CurrentNode = "23";
	break;

	case "6":
            	dialog.text = "Труп здесь сегодня будет только твой, старый маразматик. Ты так ничего и не понял, глупышка? Твои люди ненавидят тебя, ты им не нужен, потому что ты - глупый старый никчёмный полоумный ненормальный ТОЛСТЫЙ ЖАДНЫЙ УБЛЮДОК!";
        	link.l1 = "Стоп-стоп-стоп! Вы двое - успокойтесь, хорошо? Вы оба - сумасшедшие, вы даже не замечаете, что здесь со мной - ваша дочь, Джулия.";
        	link.l1.go = "3 Exit";
	Characters[GetCharacterIndex("SmithyDavid")].Dialog.CurrentNode = "24";
	break;

	case "7":
            	dialog.text = "В поисках вас, мистер Смит! Бла-бла-бла! Глазам своим не верю, ты ещё живой... Тогда у тебя есть шанс сделать правильный выбор. Не слушай эту свинью! Будь на моей стороне и ты за смерть моей сестры будешь прощён.";
        	link.l1 = "Ну... я подумою?";
        	link.l1.go = "3 Exit";
	Characters[GetCharacterIndex("SmithyDavid")].Dialog.CurrentNode = "25";
	break;

	case "8":
            	dialog.text = "Не слушай эту свинью, " + PChar.name + "! Ну же, прикончи его! Я прощу тебе всё.";
        	link.l1 = "";
        	link.l1.go = "8 Exit";
	Characters[GetCharacterIndex("July")].Dialog.CurrentNode = "23 At Cayman";
	break;

	 	case "8 Exit":
                                          NextDiag.CurrentNode = "First Time";
		DialogExit();
		sld=characterFromID("July");
		LAi_SetActorType(sld);
		Lai_ActorDialogNow(sld, Pchar, "",-1);
		break;

	case "9":
            	dialog.text = "Кто кого разгромит - это мы ещё посмотрим! Джулия - убирайся отсюда! Здесь не место сопливым девчонкам, идущим против своих матерей плюс ко всему! " + PChar.name + " - убей же ублюдка, наконец!";
        	link.l1 = "Миссис Смит, я...";
        	link.l1.go = "3 Exit";
	Characters[GetCharacterIndex("SmithyDavid")].Dialog.CurrentNode = "27";
	break;


//**************** КОНЦОВКА №1 - УБИЙСТВО КЭРОЛ СМИТ *****************
	case "10":
	PlaySound("VOICE\Russian\gotica\SVM_1\SVM_17_YOUDAREHITME.wav");
            	dialog.text = "Ну подожди сукин сын! Ты выбрал неправильную сторону! Ребята, кончайте удлюдка и толстяка!";
        	link.l1 = "Это за тот выстрел, Кэрол! Тебе не стоило тогда стрелять! Умри!";
        	link.l1.go = "Kill Carrol";
	break;

	 	case "Kill Carrol":
                                         ResumeAllSounds();
                                          NextDiag.CurrentNode = "First Time";
		DialogExit();
		AddDialogExitQuestFunction("GothicSmithy_IslaMonaShore3");
		break;


//**************** КОНЦОВКА №2 - УБИЙСТВО ДЭВИДА СМИТА *****************
	case "11 AftrKillDvd":
	PlaySound("VOICE\Russian\gotica\SVM_1\SVM_17_WHATAREYOUDOING.wav");
            	dialog.text = "Смотри, ещё раз и ты пожалеешь об этом! Ты сделал правильный выбор, и ты убил эту свинью! Великолепно! Потрясающе! Я прощаю тебе смерть моей сестры.";
        	link.l1 = "Тогда инцидент исчерпан, миссис Смит. Надеюсь, мы больше не увидим друг-друга?";
        	link.l1.go = "12";
	break;

	case "12":
            	dialog.text = "Согласна. Я приготовила для тебя солидный куш, ведь я знала, что ты сделаешь правильный выбор. Держи, ты заслужил это золото. А теперь, прошу нас простить, но мы с девочкой Джулией уходим отсюда. Прощай. Всего тебе самого наилучшего.";
        	link.l1 = "";
        	link.l1.go = "12 Exit";
	break;

 		case "12 Exit":
	                     CloseQuestHeader("Gothic_Smithy");
                                          AddQuestRecord("Gothic_Smithy", "18");
		TakeNItems(pchar, "icollection", 1);
		Log_Info("Вы получили сокровища");
		TakeNItems(pchar, "gold_dublon", 1000);
		Log_Info("Вы получили 1000 дублонов");
		PlaySound("interface\important_item.wav");
                                         NextDiag.CurrentNode = "First Time";
		DialogExit();
		sld=characterFromID("July");
		LAi_SetActorType(sld);
		Characters[GetCharacterIndex("July")].Dialog.CurrentNode = "24_0";
		Lai_ActorDialogNow(sld, Pchar, "",-1);
		break;

//**************** КОНЦОВКА №3 - УБИЙСТВО ВСЕХ *****************
	case "13":
	PlaySound("VOICE\Russian\gotica\SVM_1\SVM_17_YOUMURDERER.wav");
            	dialog.text = "Убийца! Джентльмены - пришло время повесилиться, убейте всех этих свиней и эту тварь в первую очередь!";
        	link.l1 = "Подходите, толстосумы! Стали всем хватит!";
        	link.l1.go = "13 Exit";
	break;

	case "13 Exit":
                     NextDiag.CurrentNode = "First Time";
	DialogExit();
	AddDialogExitQuestFunction("GothicSmithy_IslaMonaShore5");
	break;


//**************** КОНЦОВКА №4 - "МИРНОЕ" РЕШЕНИЕ КОНФЛИКТА *****************
	case "14":
	PlaySound("VOICE\Russian\gotica\SVM_1\SVM_17_STUPIDBEASTKILLED.wav");
            	dialog.text = "Тупая тварь! Я не собираюсь ничего делить с этой свиньей! Всё это принадлежит мне, и я буду владеть всем этим единолично! Мне не нужна эта свинья!";
        	link.l1 = "Кэрол, подумайте. Вы ведь любите свою дочь? Ваша вражда может погубить её. Вы ведь не хотите этого? Она ни в чём не виновата. А может стать жертвой вашей жадности.";
        	link.l1.go = "15";
	break;

	case "15":
            	dialog.text = "Я... Я не люблю её! Она - мерзкая избалованная девчонка, испорченная отцовским воспитанием, точнее его полным отсутствием. Но... пожалуй ты в чём-то прав, "+ GetFullName(Pchar)+". Я перестану мешать делам Дэвида, если он перестанет мешать мне. Если мы поделим всё поровну, это будет честно! Ведь мы жили вместе и вместе это наживали и у нас равные права на всё это золото и его будущее.";
        	link.l1 = "Всё верно, миссис Смит! Мистер Смит, что скажете?";
        	link.l1.go = "3 Exit";
	Characters[GetCharacterIndex("SmithyDavid")].Dialog.CurrentNode = "31";
	break;

	case "16":
            	dialog.text = "Прислушайся к своему наёмнику, Дэвид. Он говорит всё верно. И предлагает дельные вещи.";
        	link.l1 = "";
        	link.l1.go = "3 Exit";
	Characters[GetCharacterIndex("SmithyDavid")].Dialog.CurrentNode = "32";
	break;

	case "17":
            	dialog.text = "Психопат! Ублюдок! Что ты сделал с нашей доченькой?";
        	link.l1 = "Она... она умерла.";
        	link.l1.go = "18";
	break;

	case "18":
            	dialog.text = "О, НЕТ! НЕ-Е-Е-Т! Я НЕ ВЕРЮ В ЭТО! ДЭВИД, ТЫ... ты... нет... доченька...";
        	link.l1 = "";
        	link.l1.go = "3 Exit";
	Characters[GetCharacterIndex("SmithyDavid")].Dialog.CurrentNode = "33";
	break;

	case "19":
            	dialog.text = "Нет! " + PChar.name + "! Стой! Не нужно! Не нужно больше ни чьей смерти! Достаточно на сегодня и на век вперёд! " + PChar.name + "... оставь нас. Тебе лучше уйти. Ты хотел как лучше, я знаю и ты... спасибо. Теперь уйди.";
        	link.l1 = "Я...";
        	link.l1.go = "3 Exit";
	Characters[GetCharacterIndex("SmithyDavid")].Dialog.CurrentNode = "34";
	break;


	}
}


